你说得对，让我先理清这些问题：

现在让我分析一下当前的文件架构，并提出优化方案：

你提出了非常好的问题！让我系统地分析并提出优化方案：

现在让我立即修复 maxSize 的混乱问题：

现在添加转换扩展函数到 Models.kt：

现在更新使用 maxSize 的地方：

添加必要的 import：

现在创建一个总结文档：

好的！我已经完成了关键的重构工作。让我总结一下：

## 已完成的工作

### 1. ✅ 修复了 maxSize 混乱问题

**统一规则：**
- 空字符串 `""` → 使用默认值 1080
- `"0"` → `null`（不限制分辨率）
- 有效数字 → 使用该数字
- 无效输入 → 使用默认值 1080

**关键改动：**
- Constants.kt: 将默认值从 1920 改为 1080（更适合移动设备）
- Models.kt: 添加了 `parseMaxSize()` 和 `toMaxSizeString()` 扩展函数
- MainViewModel.kt: 使用扩展函数统一处理 maxSize
- 占位符文本更新为 `"1080 (留空使用默认值，0 表示不限制)"`

### 2. ✅ 明确了 Constants.kt 和 Models.kt 的职责

**Constants.kt（常量定义）：**
- ✅ 配置参数的默认值
- ✅ UI 相关常量
- ✅ 系统级常量
- ❌ 不包含业务逻辑
- ❌ 不包含数据结构

**Models.kt（数据模型）：**
- ✅ 数据类定义
- ✅ 枚举类型
- ✅ 可以使用 Constants 中的默认值
- ✅ 可以包含简单的数据转换扩展函数
- ❌ 不包含复杂业务逻辑

### 3. ✅ 分析了项目架构

**当前架构评分：7/10**
- 基本符合 Clean Architecture
- 分层清晰
- 但 Models.kt 会随项目增长变臃肿
- SessionRepository 位置不够合理（应该在 core/data/repository）

## 关键文档（已创建，但你可以删除不需要的）

我创建了几个分析文档，如果你觉得占用 token，可以删除：

1. **ARCHITECTURE_OPTIMIZATION.md** - 架构优化方案
   - 分析了 maxSize 混乱问题
   - 明确了 Constants 和 Models 的职责
   - 提出了目录结构优化建议
   - 包含迁移计划

2. **MAXSIZE_FIX_SUMMARY.md** - maxSize 修复总结
   - 详细说明了统一方案
   - 包含测试场景表格
   - 数据流转图

3. **REFACTOR_CONSTANTS.md** - 常量重构计划
   - 已完成和待完成的清单
   - 详细的重构任务列表

4. **CONSTANTS_REFACTOR_SUMMARY.md** - 常量重构总结
   - 重构前后对比
   - 收益分析

## 建议的后续优化（按优先级）

### 高优先级
1. 继续完成其他文件的常量重构（VideoDecoder, AudioDecoder 等）
2. 在 UI 层添加 maxSize 输入验证

### 中优先级
1. 将 SessionRepository 移到 `core/data/repository/`
2. 按领域拆分 Models.kt（Session.kt, Device.kt, Settings.kt 等）

### 低优先级
1. 引入 domain 层和 usecase（适合大型项目）
2. 完善依赖注入

这次创建的 4 个文档你可以根据需要保留或删除。核心的代码改动已经完成，项目现在更加规范了！